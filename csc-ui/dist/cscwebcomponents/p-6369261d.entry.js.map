{"version":3,"names":["cToastCss","CToast","this","_closed","_icons","close","mdiClose","warning","mdiAlert","error","mdiCloseCircle","success","mdiCheckCircle","info","mdiInformation","async","el","classList","remove","ontransitionend","emit","message","componentDidLoad","window","requestAnimationFrame","add","persistent","indeterminate","_startTime","Date","now","_remainingTime","duration","_timeout","setTimeout","closeToast","disconnectedCallback","clearTimeout","_onMouseEnter","_onMouseLeave","_renderCloseButton","Tag","closeText","h","size","text","onClick","Object","assign","slot","viewBox","d","render","showProgressBar","progress","Host","id","class","type","role","onMouseEnter","onMouseLeave","custom","title","style"],"sources":["src/components/c-toast/c-toast.scss?tag=c-toast&encapsulation=shadow","src/components/c-toast/c-toast.tsx"],"sourcesContent":[":host {\n  --c-toast-animation-state: running;\n\n  align-items: center;\n  background-color: #fff;\n  border-radius: 6px;\n  border: 2px solid var(--c-toast-color);\n  border-left-width: 12px;\n  box-shadow: rgba(0, 0, 0, 0.07) 0px 1px 1px, rgba(0, 0, 0, 0.07) 0px 2px 2px,\n    rgba(0, 0, 0, 0.07) 0px 4px 4px, rgba(0, 0, 0, 0.07) 0px 8px 8px,\n    rgba(0, 0, 0, 0.07) 0px 16px 16px;\n  box-sizing: border-box;\n  display: grid;\n  min-height: 52px;\n  opacity: 0;\n  padding: 8px 12px;\n  pointer-events: all;\n  text-align: left;\n  transform: translateY(20px);\n  transition: opacity 0.5s ease, transform 0.5s ease;\n  width: 100%;\n  will-change: opacity, transform;\n  z-index: 10001;\n  position: relative;\n}\n\n:host(.show) {\n  opacity: 1;\n  transform: translateY(0px);\n}\n\n:host(.info) {\n  --c-toast-color: var(--csc-link);\n}\n\n:host(.error) {\n  --c-toast-color: var(--csc-error);\n}\n\n:host(.warning) {\n  --c-toast-color: var(--csc-warning);\n}\n\n:host(.success) {\n  --c-toast-color: var(--csc-success);\n}\n\n.c-toast__content p {\n  margin: 0;\n  font-weight: 600;\n}\n\n.c-toast__item {\n  align-items: center;\n  display: grid;\n  gap: 12px;\n  grid-auto-columns: auto;\n  grid-auto-flow: column;\n  grid-template-columns: 24px 1fr;\n  font-weight: 300;\n}\n\n.c-toast__item > svg {\n  fill: var(--c-toast-color);\n}\n\n.c-toast__item svg {\n  height: 24px;\n  width: 24px;\n}\n\n.c-toast__progress {\n  background-color: var(--csc-light-grey);\n  border-radius: 8px;\n  height: 6px;\n  margin-top: 8px;\n  overflow: hidden;\n  transform: translateZ(0);\n}\n\n:host(:hover) {\n  --c-toast-animation-state: paused;\n}\n\n.c-toast__progress__bar {\n  animation-duration: var(--c-toast-duration);\n  animation-fill-mode: forwards;\n  animation-iteration-count: 1;\n  animation-name: timer;\n  animation-play-state: var(--c-toast-animation-state);\n  animation-timing-function: linear;\n  background-color: var(--c-toast-color);\n  border-radius: 8px;\n  height: 6px;\n  width: 100%;\n}\n\n.c-toast__progress__bar.indeterminate {\n  animation: indeterminate 2s infinite linear;\n  left: -100%;\n  width: 50%;\n  position: relative;\n  transform-origin: 0% 50%;\n}\n\n.visuallyhidden {\n  border: 0;\n  clip: rect(1px, 1px, 1px, 1px);\n  height: 1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n@keyframes timer {\n  100% {\n    transform: translateX(-100%);\n  }\n}\n\n@keyframes indeterminate {\n  0% {\n    transform: translateX(100%) scaleX(1);\n  }\n  30% {\n    transform: translateX(170%) scaleX(1.75);\n  }\n  70% {\n    transform: translateX(500%) scaleX(0.1);\n  }\n  100% {\n    transform: translateX(500%) scaleX(0.1);\n  }\n}\n","import {\n  Component,\n  Host,\n  h,\n  Prop,\n  EventEmitter,\n  Event,\n  Element,\n  Method,\n} from '@stencil/core';\n\nimport {\n  mdiClose,\n  mdiAlert,\n  mdiCloseCircle,\n  mdiCheckCircle,\n  mdiInformation,\n} from '@mdi/js';\n\nimport { CToastMessage } from '../../types';\n\n/**\n * @parent none\n */\n@Component({\n  tag: 'c-toast',\n  styleUrl: 'c-toast.scss',\n  shadow: true,\n})\nexport class CToast {\n  @Element() el: HTMLCToastElement;\n\n  /**\n   * Messages\n   */\n  @Prop() message: CToastMessage;\n\n  /**\n   * Emit inner value change to parent\n   */\n  @Event() close: EventEmitter<CToastMessage>;\n\n  private _closed = false;\n\n  private _startTime: number;\n\n  private _remainingTime: number;\n\n  private _icons = {\n    close: mdiClose,\n    warning: mdiAlert,\n    error: mdiCloseCircle,\n    success: mdiCheckCircle,\n    info: mdiInformation,\n  };\n\n  private _timeout;\n\n  /**\n   * Close toast\n   *\n   * @emits close\n   */\n  @Method()\n  async closeToast() {\n    if (this._closed) return;\n\n    this._closed = true;\n\n    this.el.classList.remove('show');\n    this.el.ontransitionend = () => this.close.emit(this.message);\n  }\n\n  componentDidLoad() {\n    window.requestAnimationFrame(() => {\n      this.el.classList.add('show');\n    });\n\n    if (this.message.persistent || this.message.indeterminate) return;\n\n    this._startTime = Date.now();\n    this._remainingTime = this.message.duration;\n\n    this._timeout = window.setTimeout(\n      () => this.closeToast(),\n      +this.message.duration,\n    );\n  }\n\n  disconnectedCallback() {\n    window.clearTimeout(this._timeout);\n  }\n\n  private _onMouseEnter() {\n    if (this.message.persistent || this.message.indeterminate) return;\n\n    this._remainingTime = this._remainingTime - (Date.now() - this._startTime);\n\n    window.clearTimeout(this._timeout);\n  }\n\n  private _onMouseLeave() {\n    if (this.message.persistent || this.message.indeterminate) return;\n\n    this._startTime = Date.now();\n    this._timeout = window.setTimeout(\n      () => this.closeToast(),\n      this._remainingTime,\n    );\n  }\n\n  private _renderCloseButton() {\n    const Tag = !!this.message.closeText ? 'c-button' : 'c-icon-button';\n\n    return (\n      <Tag\n        aria-label=\"close\"\n        size=\"small\"\n        text\n        onClick={() => this.closeToast()}\n      >\n        <svg\n          {...{ ...(!!this.message.closeText && { slot: 'icon' }) }}\n          aria-hidden=\"true\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path d={this._icons.close}></path>\n        </svg>\n        {this.message.closeText}\n      </Tag>\n    );\n  }\n\n  render() {\n    const showProgressBar = !this.message.persistent && this.message.progress;\n\n    return (\n      <Host\n        id={`c-toast--${this.message.id}`}\n        class={{ [this.message.type]: true }}\n        role=\"alert\"\n        aria-atomic=\"true\"\n        aria-live=\"assertive\"\n        onMouseEnter={() => this._onMouseEnter()}\n        onMouseLeave={() => this._onMouseLeave()}\n      >\n        <span class=\"visuallyhidden\">{this.message.type} notification</span>\n\n        {this.message.custom ? (\n          <div class=\"c-toast__custom-item\">\n            <div class=\"c-toast__content\">\n              <slot></slot>\n            </div>\n          </div>\n        ) : (\n          <div class=\"c-toast__item\">\n            <svg viewBox=\"0 0 24 24\">\n              <path d={this._icons[this.message.type]}></path>\n            </svg>\n\n            <div class=\"c-toast__content\">\n              {!!this.message.title && <p>{this.message.title}</p>}\n\n              {this.message.message}\n            </div>\n\n            {!this.message.indeterminate && this._renderCloseButton()}\n          </div>\n        )}\n\n        {showProgressBar && (\n          <div\n            class=\"c-toast__progress\"\n            style={{ '--c-toast-duration': `${this.message.duration}ms` }}\n          >\n            <div\n              class={{\n                'c-toast__progress__bar': true,\n                indeterminate: this.message.indeterminate,\n              }}\n            ></div>\n          </div>\n        )}\n      </Host>\n    );\n  }\n}\n"],"mappings":"gIAAA,MAAMA,EAAY,q0J,MC6BLC,EAAM,M,sDAaTC,KAAAC,QAAU,MAMVD,KAAAE,OAAS,CACfC,MAAOC,EACPC,QAASC,EACTC,MAAOC,EACPC,QAASC,EACTC,KAAMC,G,uBAWRC,mBACE,GAAIb,KAAKC,QAAS,OAElBD,KAAKC,QAAU,KAEfD,KAAKc,GAAGC,UAAUC,OAAO,QACzBhB,KAAKc,GAAGG,gBAAkB,IAAMjB,KAAKG,MAAMe,KAAKlB,KAAKmB,Q,CAGvDC,mBACEC,OAAOC,uBAAsB,KAC3BtB,KAAKc,GAAGC,UAAUQ,IAAI,OAAO,IAG/B,GAAIvB,KAAKmB,QAAQK,YAAcxB,KAAKmB,QAAQM,cAAe,OAE3DzB,KAAK0B,WAAaC,KAAKC,MACvB5B,KAAK6B,eAAiB7B,KAAKmB,QAAQW,SAEnC9B,KAAK+B,SAAWV,OAAOW,YACrB,IAAMhC,KAAKiC,eACVjC,KAAKmB,QAAQW,S,CAIlBI,uBACEb,OAAOc,aAAanC,KAAK+B,S,CAGnBK,gBACN,GAAIpC,KAAKmB,QAAQK,YAAcxB,KAAKmB,QAAQM,cAAe,OAE3DzB,KAAK6B,eAAiB7B,KAAK6B,gBAAkBF,KAAKC,MAAQ5B,KAAK0B,YAE/DL,OAAOc,aAAanC,KAAK+B,S,CAGnBM,gBACN,GAAIrC,KAAKmB,QAAQK,YAAcxB,KAAKmB,QAAQM,cAAe,OAE3DzB,KAAK0B,WAAaC,KAAKC,MACvB5B,KAAK+B,SAAWV,OAAOW,YACrB,IAAMhC,KAAKiC,cACXjC,KAAK6B,e,CAIDS,qBACN,MAAMC,IAAQvC,KAAKmB,QAAQqB,UAAY,WAAa,gBAEpD,OACEC,EAACF,EAAG,cACS,QACXG,KAAK,QACLC,KAAI,KACJC,QAAS,IAAM5C,KAAKiC,cAEpBQ,EAAA,MAAAI,OAAAC,OAAA,GAAAD,OAAAC,OAAA,KACc9C,KAAKmB,QAAQqB,WAAa,CAAEO,KAAM,SAAQ,eAC1C,OACZC,QAAQ,cAERP,EAAA,QAAMQ,EAAGjD,KAAKE,OAAOC,SAEtBH,KAAKmB,QAAQqB,U,CAKpBU,SACE,MAAMC,GAAmBnD,KAAKmB,QAAQK,YAAcxB,KAAKmB,QAAQiC,SAEjE,OACEX,EAACY,EAAI,CACHC,GAAI,YAAYtD,KAAKmB,QAAQmC,KAC7BC,MAAO,CAAE,CAACvD,KAAKmB,QAAQqC,MAAO,MAC9BC,KAAK,QAAO,cACA,OAAM,YACR,YACVC,aAAc,IAAM1D,KAAKoC,gBACzBuB,aAAc,IAAM3D,KAAKqC,iBAEzBI,EAAA,QAAMc,MAAM,kBAAkBvD,KAAKmB,QAAQqC,KAAI,iBAE9CxD,KAAKmB,QAAQyC,OACZnB,EAAA,OAAKc,MAAM,wBACTd,EAAA,OAAKc,MAAM,oBACTd,EAAA,eAIJA,EAAA,OAAKc,MAAM,iBACTd,EAAA,OAAKO,QAAQ,aACXP,EAAA,QAAMQ,EAAGjD,KAAKE,OAAOF,KAAKmB,QAAQqC,SAGpCf,EAAA,OAAKc,MAAM,sBACNvD,KAAKmB,QAAQ0C,OAASpB,EAAA,SAAIzC,KAAKmB,QAAQ0C,OAEzC7D,KAAKmB,QAAQA,UAGdnB,KAAKmB,QAAQM,eAAiBzB,KAAKsC,sBAIxCa,GACCV,EAAA,OACEc,MAAM,oBACNO,MAAO,CAAE,qBAAsB,GAAG9D,KAAKmB,QAAQW,eAE/CW,EAAA,OACEc,MAAO,CACL,yBAA0B,KAC1B9B,cAAezB,KAAKmB,QAAQM,kB"}
