{"version":3,"file":"c-tabs.js","sourceRoot":"","sources":["../../../../src/components/c-tabs/c-tabs.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  h,\n  Host,\n  Element,\n  Event,\n  Prop,\n  EventEmitter,\n  Listen,\n  Watch,\n} from '@stencil/core';\n\n/**\n * @group Content Selectors\n * @slot - Default slot\n */\n@Component({\n  tag: 'c-tabs',\n  styleUrl: 'c-tabs.scss',\n  shadow: true,\n})\nexport class CTabs {\n  /**\n   * Currently active tab\n   */\n  @Prop({ mutable: true }) value!: number | string;\n\n  /**\n   * Disable the bottom border\n   */\n  @Prop() borderless = false;\n\n  /**\n   * Emit changes to the parent\n   */\n  @Event({ bubbles: false }) changeValue: EventEmitter;\n\n  @Element() el: HTMLCTabsElement;\n\n  @Watch('value')\n  onExternalValueChange() {\n    this._handleActiveTab();\n    this.changeValue.emit(this.value);\n  }\n\n  @Listen('tabChange', { passive: true })\n  tabChangeHandler(e) {\n    this.value = e.detail;\n  }\n\n  @Listen('keydown', { capture: true })\n  handleKeyDown(event: KeyboardEvent) {\n    if (event.key === 'Enter' || event.code === 'Space') {\n      this.value = (event.target as HTMLCTabElement).value;\n    }\n  }\n\n  @Listen('keyup', { capture: true })\n  handleKeyUp(ev: KeyboardEvent) {\n    const isArrowLeft = ev.key === 'ArrowLeft';\n    const isArrowRight = ev.key === 'ArrowRight';\n    const tabIndex = this._getTabIndex(this.value);\n\n    const firstAvailableValue = this.availableValues.at(0);\n    const lastAvailableValue = this.availableValues.at(-1);\n\n    const isBeginning = this.value === firstAvailableValue;\n    const isEnd = this.value === lastAvailableValue;\n\n    const nextValue = isEnd\n      ? firstAvailableValue\n      : this.availableValues[tabIndex + 1];\n    const previousValue = isBeginning\n      ? lastAvailableValue\n      : this.availableValues[tabIndex - 1];\n\n    if (!isArrowRight && !isArrowLeft) return;\n\n    if (isArrowLeft) {\n      this.value = previousValue;\n    }\n\n    if (isArrowRight) {\n      this.value = nextValue;\n    }\n\n    this._handleActiveTab(true);\n\n    this.changeValue.emit(this.value);\n  }\n\n  componentDidLoad() {\n    this._handleActiveTab();\n  }\n\n  get tabs() {\n    return (Array.from(this.el.childNodes) as HTMLCTabElement[]).filter(\n      (tab) => tab.tagName === 'C-TAB',\n    );\n  }\n\n  get setsize() {\n    return this.tabs.length;\n  }\n\n  get availableValues() {\n    return this.tabs.filter((tab) => !tab.disabled).map((tab) => tab.value);\n  }\n\n  private _getTabIndex(value: string | number) {\n    return this.availableValues.findIndex((tab) => tab === value);\n  }\n\n  private _handleActiveTab(isUserAction = false) {\n    let position = 0;\n\n    this.tabs.forEach((tab: HTMLCTabElement) => {\n      if (!tab.disabled) {\n        position += 1;\n      }\n\n      const isActive = tab.value === this.value;\n\n      tab.active = isActive;\n\n      if (!isUserAction && !tab.disabled) {\n        tab.position = position;\n        tab.setsize = this.availableValues.length;\n      }\n\n      if (isActive && isUserAction) {\n        tab.focus();\n      }\n    });\n  }\n\n  render() {\n    const classes = {\n      'c-tabs': true,\n      'c-tabs--borderless': this.borderless,\n    };\n\n    return (\n      <Host role=\"tablist\" class={classes}>\n        <slot></slot>\n      </Host>\n    );\n  }\n}\n"]}
